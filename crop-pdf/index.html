<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- TITLE -->
  <title>Crop PDF â€“ Crop Your PDF Online | Skill2Job Tools</title>

  <!-- PRIMARY SEO -->
  <meta name="description" content="Use Skill2Job's free Crop PDF tool to easily crop and adjust PDF pages online. Fast, accurate, and mobile-friendly.">
  <meta name="keywords" content="crop pdf, pdf crop online, adjust pdf pages, pdf editor online, Skill2Job tools">
  <meta name="author" content="Yadav Subba">
  <meta name="robots" content="index, follow">

  <!-- CANONICAL -->
  <link rel="canonical" href="https://tools.skill2job.site/crop-pdf">

  <!-- FAVICON & TOUCH ICON (preload) -->
  <link rel="preload" href="/favicon.ico" as="image">
  <link rel="icon" type="image/webp" href="/favicon">
  <link rel="apple-touch-icon" href="/favicon">

  <!-- SOCIAL / OG TAGS -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Crop PDF â€“ Free Online Tool | Skill2Job">
  <meta property="og:description" content="Crop your PDF pages online easily. Accurate, fast, and mobile-friendly PDF tool.">
  <meta property="og:url" content="https://tools.skill2job.site/crop-pdf">
  <meta property="og:image" content="/favicon">
  <meta property="og:site_name" content="Skill2Job Tools">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Crop PDF â€“ Skill2Job Tools">
  <meta name="twitter:description" content="Free online Crop PDF tool by Skill2Job. Crop PDF pages easily and quickly.">
  <meta name="twitter:image" content="/favicon">

  <!-- FONTS (PERFORMANCE) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- EXTERNAL CSS -->
  <link rel="stylesheet" href="/style.css">

  <!-- STRUCTURED DATA (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Crop PDF",
    "url": "https://tools.skill2job.site/crop-pdf",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "All",
    "description": "Free online Crop PDF tool to crop and adjust PDF pages easily and accurately.",
    "author": { "@type": "Person", "name": "Yadav Subba" },
    "publisher": { 
      "@type": "Organization",
      "name": "Skill2Job",
      "logo": { "@type": "ImageObject", "url": "/favicon" }
    }
  }
  </script>
  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1876390706944654" crossorigin="anonymous"></script>
</head>
<body>
  <!-- HEADER (with improved share button) -->
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">
        <a href="/">
          <img src="https://i.postimg.cc/YCnzSpLg/Official_Logo.webp" alt="Skill2Job Logo">
        </a>
      </div>
      <button class="share-btn" type="button" aria-label="Share Age Calculator">Share</button>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="site-main">
   <!-- PDF SCRIPTS WITH WORKER FIX (CRITICAL) -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.15.349/pdf.min.js"></script>
<script defer>
  // === PDF.JS WORKER SETUP (Fixes "Error loading PDF") ===
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.15.349/pdf.worker.min.js';
</script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

<!-- MAIN TOOL SECTION -->
<section class="section">
  <div class="container">
    <div class="card age-tool-card">
      <h1 class="tool-title">Crop PDF</h1>

      <!-- Upload PDF -->
      <div class="input-group">
        <label for="pdfFile">Upload PDF</label>
        <input type="file" id="pdfFile" accept="application/pdf">
      </div>

      <!-- Front messages / spinner -->
      <div class="loading" id="cropLoading">
        <div class="spinner"></div>
      </div>
      <div class="result" id="cropStatus"></div>

      <!-- Page selection (only if multiple pages) -->
      <div class="input-group" id="pageSelectGroup" style="display:none; margin-top:10px;">
        <label for="pageSelect">Select page to crop</label>
        <select id="pageSelect"></select>
      </div>

      <!-- Crop Dashboard -->
      <div id="cropDashboard" style="display:none; margin-top:16px;">
        <div id="pdfContainer" style="max-height:600px; overflow:auto;"></div>
        <button class="calculate-btn" id="cropPDFBtn" style="margin-top:16px;">Crop PDF</button>
      </div>

      <!-- Final result / Download -->
      <div class="result" id="cropResult"></div>
    </div>
  </div>
</section>

    <!-- ABOUT TOOL -->
    <section class="section">
      <div class="container">
        <div class="card">
          <h2>About This Tool</h2>
          <p>
Skill2Job's free Age Calculator allows you to quickly and accurately calculate your exact age in years, months, and days based on your date of birth. 
This online tool is simple to use, mobile-friendly, and works seamlessly on all devices without requiring any downloads or installations. 
All calculations are performed locally on your device, ensuring your personal information is never stored, shared, or tracked. 
Whether you want to know your precise age for official purposes, planning, or curiosity, this tool provides instant results with complete privacy. 
Our Age Calculator is designed for students, job seekers, professionals, and anyone who wants a reliable, fast, and easy way to calculate age online. 
Experience convenience, accuracy, and safety with Skill2Job's Age Calculator today.
          </p>
        </div>
      </div>
    </section>

    <!-- MORE TOOLS -->
    <section class="section">
      <div class="container">
        <div class="card">
          <h2>More Tools</h2>
          <div class="tools-grid">
            <div class="tool-card">
              <h3>Merge PDF</h3>
              <p>Combine multiple PDF files into one.</p>
              <a class="tool-link" href="/merge-pdf/">Use Tool</a>
            </div>
            <div class="tool-card">
              <h3>Remove PDF Pages</h3>
              <p>Delete selected pages from a PDF file.</p>
              <a class="tool-link" href="/remove-pages/">Use Tool</a>
            </div>
            <div class="tool-card">
              <h3>Crop PDF</h3>
              <p>Crop and adjust PDF pages easily.</p>
              <a class="tool-link" href="/crop-pdf/">Use Tool</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
  <p>
    <strong>Skill2Job Tools</strong> | 
    <a href="/">Home</a> | 
    <a href="/about">About</a> | 
    <a href="/contact">Contact</a> | 
    <a href="/privacy">Privacy</a> | 
    <a href="/terms">Terms</a>
  </p>
  <p>Â© 2026 Skill2Job</p>
</footer>

  <!-- MAIN JAVASCRIPT (Fully functional flow) -->
<!-- âœ… FIXED PDF SCRIPTS - CORRECT ORDER -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.15.349/pdf.worker.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.15.349/pdf.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
<script defer>
  // Set worker AFTER pdf.min.js loads
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.15.349/pdf.worker.min.js';
</script>

<!-- COMPLETE CROP PDF + SHARE JS -->
<script defer>
(function () {
  // ===== CROP PDF TOOL (Main functionality) =====
  const pdfFileInput   = document.getElementById('pdfFile');
  const cropLoading    = document.getElementById('cropLoading');
  const cropStatus     = document.getElementById('cropStatus');
  const cropDashboard  = document.getElementById('cropDashboard');
  const pdfContainer   = document.getElementById('pdfContainer');
  const cropPDFBtn     = document.getElementById('cropPDFBtn');
  const cropResult     = document.getElementById('cropResult');
  const pageSelectGrp  = document.getElementById('pageSelectGroup');
  const pageSelect     = document.getElementById('pageSelect');

  let uploadedPDFBytes = null;
  let pdfDocJs         = null;
  let currentPageIndex = 0;
  let cropRect         = null;
  let canvasEl         = null;
  let viewport         = null;
  let dragOffsetX = 0;
  let dragOffsetY = 0;
  let isDragging  = false;

  function resetUI() {
    cropStatus.style.display   = 'none';
    cropResult.style.display   = 'none';
    cropDashboard.style.display = 'none';
    cropLoading.style.display  = 'none';
    pdfContainer.innerHTML     = '';
    pageSelectGrp.style.display = 'none';
    pageSelect.innerHTML       = '';
    cropRect   = null;
    canvasEl   = null;
    viewport   = null;
  }

  function showStatus(message) {
    cropStatus.innerHTML = message;
    cropStatus.style.display = 'block';
  }

  // File upload handler
  pdfFileInput.addEventListener('change', async function () {
    resetUI();
    const file = pdfFileInput.files[0];

    if (!file) {
      showStatus('Please upload a PDF file first.');
      return;
    }

    cropLoading.style.display = 'block';
    showStatus('<strong>Uploading...</strong> Please wait a moment.');
    uploadedPDFBytes = await file.arrayBuffer();

    setTimeout(async () => {
      try {
        // Wait for pdfjsLib to be ready
        if (typeof pdfjsLib === 'undefined') {
          throw new Error('PDF.js library not loaded. Please refresh the page.');
        }
        
        pdfDocJs = await pdfjsLib.getDocument({ data: uploadedPDFBytes }).promise;
        cropLoading.style.display = 'none';
        showStatus('<strong>Upload successful!</strong> Please wait, preparing dashboard...');
        
        const totalPages = pdfDocJs.numPages;

        if (totalPages > 1) {
          pageSelectGrp.style.display = 'block';
          pageSelect.innerHTML = '';
          for (let i = 1; i <= totalPages; i++) {
            const opt = document.createElement('option');
            opt.value = i - 1;
            opt.textContent = 'Page ' + i;
            pageSelect.appendChild(opt);
          }
          currentPageIndex = 0;
          await renderPage(currentPageIndex);
        } else {
          currentPageIndex = 0;
          await renderPage(currentPageIndex);
        }

        cropDashboard.style.display = 'block';
        showStatus('<strong>Dashboard ready!</strong> Drag/resize the red box to set crop area, then click Crop PDF.');
      } catch (err) {
        console.error('PDF.js error:', err);
        cropLoading.style.display = 'none';
        showStatus(`Error loading PDF: ${err.message || 'Invalid format. Please try another file.'}`);
      }
    }, 900);
  });

  // Page selector
  pageSelect.addEventListener('change', async function () {
    currentPageIndex = parseInt(this.value, 10) || 0;
    showStatus('Loading selected page. Please wait...');
    await renderPage(currentPageIndex);
    showStatus('<strong>Dashboard ready!</strong> Drag/resize the red box to set crop area, then click Crop PDF.');
  });

  async function renderPage(pageIndex) {
    pdfContainer.innerHTML = '';

    const page = await pdfDocJs.getPage(pageIndex + 1);
    viewport = page.getViewport({ scale: 1.5 });

    const pageWrapper = document.createElement('div');
    pageWrapper.classList.add('pdf-page');

    canvasEl = document.createElement('canvas');
    canvasEl.width = viewport.width;
    canvasEl.height = viewport.height;
    const ctx = canvasEl.getContext('2d');

    await page.render({ canvasContext: ctx, viewport }).promise;

    cropRect = document.createElement('div');
    cropRect.classList.add('crop-rect');
    cropRect.style.top = '10px';
    cropRect.style.left = '10px';
    cropRect.style.width = '80%';
    cropRect.style.height = '80%';

    // Drag events
    cropRect.addEventListener('mousedown', onCropMouseDown);
    document.addEventListener('mousemove', onCropMouseMove);
    document.addEventListener('mouseup', onCropMouseUp);

    pageWrapper.appendChild(canvasEl);
    pageWrapper.appendChild(cropRect);
    pdfContainer.appendChild(pageWrapper);
  }

  function onCropMouseDown(e) {
    const rect = cropRect.getBoundingClientRect();
    const resizeZone = 16;
    if (e.clientX > rect.right - resizeZone && e.clientY > rect.bottom - resizeZone) {
      return; // Let native resize handle
    }
    e.preventDefault();
    isDragging = true;
    const parentRect = cropRect.parentElement.getBoundingClientRect();
    dragOffsetX = e.clientX - rect.left;
    dragOffsetY = e.clientY - rect.top;
  }

  function onCropMouseMove(e) {
    if (!isDragging || !cropRect || !canvasEl) return;
    const parentRect = cropRect.parentElement.getBoundingClientRect();
    let newLeft = e.clientX - parentRect.left - dragOffsetX;
    let newTop  = e.clientY - parentRect.top - dragOffsetY;

    const maxLeft = parentRect.width - cropRect.offsetWidth;
    const maxTop  = parentRect.height - cropRect.offsetHeight;

    if (newLeft < 0) newLeft = 0;
    if (newTop < 0) newTop = 0;
    if (newLeft > maxLeft) newLeft = maxLeft;
    if (newTop > maxTop) newTop = maxTop;

    cropRect.style.left = newLeft + 'px';
    cropRect.style.top  = newTop + 'px';
  }

  function onCropMouseUp() {
    isDragging = false;
  }

  // Crop button
  cropPDFBtn.addEventListener('click', async function () {
    if (!uploadedPDFBytes || !cropRect || !canvasEl || !viewport) {
      showStatus('Please upload a PDF and adjust the crop area first.');
      return;
    }

    cropResult.style.display = 'none';
    cropLoading.style.display = 'block';
    showStatus('<strong>Processing...</strong> Creating your cropped PDF. This may take a few moments.');

    setTimeout(async () => {
      try {
        const sourcePdf = await PDFLib.PDFDocument.load(uploadedPDFBytes);
        const newPdf    = await PDFLib.PDFDocument.create();

        const [page] = await newPdf.copyPages(sourcePdf, [currentPageIndex]);
        const pageWidth  = page.getWidth();
        const pageHeight = page.getHeight();

        const canvasRect = canvasEl.getBoundingClientRect();
        const cropDomRect = cropRect.getBoundingClientRect();

        const cropX_px = cropDomRect.left - canvasRect.left;
        const cropY_px = cropDomRect.top  - canvasRect.top;
        const cropW_px = cropDomRect.width;
        const cropH_px = cropDomRect.height;

        const scaleX = pageWidth / viewport.width;
        const scaleY = pageHeight / viewport.height;

        const x = cropX_px * scaleX;
        const y_bottom_up = (viewport.height - (cropY_px + cropH_px)) * scaleY;
        const w = cropW_px * scaleX;
        const h = cropH_px * scaleY;

        page.setCropBox(x, y_bottom_up, w, h);
        newPdf.addPage(page);

        const pdfBytes = await newPdf.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const downloadUrl = URL.createObjectURL(blob);

        cropLoading.style.display = 'none';
        cropResult.innerHTML = `
          <strong>âœ… Cropped PDF Ready!</strong>
          <br><a href="${downloadUrl}" download="cropped-${currentPageIndex + 1}.pdf" class="tool-link">ðŸ“¥ Download PDF</a>
        `;
        cropResult.style.display = 'block';
        showStatus('<strong>Success!</strong> Your cropped PDF is ready to download.');
      } catch (err) {
        cropLoading.style.display = 'none';
        cropResult.style.display = 'none';
        showStatus('Error creating PDF. Please try again.');
        console.error('Crop error:', err);
      }
    }, 1200);
  });

  // ===== SHARE BUTTON FUNCTIONALITY =====
  const shareBtn = document.querySelector('.share-btn');
  if (shareBtn) {
    shareBtn.addEventListener('click', function() {
      if (navigator.share) {
        navigator.share({
          title: 'Crop PDF Tool - Skill2Job',
          text: 'Crop your PDF pages easily online!',
          url: window.location.href
        }).catch(() => {
          fallbackCopy();
        });
      } else {
        fallbackCopy();
      }
    });

    function fallbackCopy() {
      navigator.clipboard.writeText(window.location.href).then(() => {
        alert('ðŸ”— Link copied to clipboard!');
      }).catch(() => {
        prompt('Copy this link:', window.location.href);
      });
    }
  }
})();
</script>

  
</body>
</html>
